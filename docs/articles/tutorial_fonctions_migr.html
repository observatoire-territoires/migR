<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tutoriel des fonctions du package migR • migR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tutoriel des fonctions du package migR">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tutorial_fonctions_migr.html">Tutoriel des fonctions du package migR</a>
    </li>
    <li>
      <a href="../articles/methodo_migr.html">Analyse des migrations rÃ©sidentielles internes en France : mÃ©thodologie</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/observatoire-territoires/migR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Tutoriel des fonctions du package migR</h1>
                        <h4 class="author">Observatoire des territoires</h4>
            
            <h4 class="date">2019-07-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/observatoire-territoires/migR/blob/master/vignettes/tutorial_fonctions_migr.Rmd"><code>vignettes/tutorial_fonctions_migr.Rmd</code></a></small>
      <div class="hidden name"><code>tutorial_fonctions_migr.Rmd</code></div>

    </div>

    
    
<p>Le package <code>migR</code> facilite l’exploitation du fichier des migrations résidentielles de l’Insee et le calcul de matrices de flux et d’indicateurs territoriaux liés à ces mobilités. Voici ces principales fonctionnalités (l’installation et le chargement sont bien évidemment un pré-requis, cf. ci-dessous).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(devtools)</a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"observatoire-territoires/migR"</span>)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(migR)</a></code></pre></div>
<div id="telecharger-le-fichier-detail-des-migrations-residentielles-du-recensement-de-linsee" class="section level2">
<h2 class="hasAnchor">
<a href="#telecharger-le-fichier-detail-des-migrations-residentielles-du-recensement-de-linsee" class="anchor"></a>Télécharger le fichier détail des migrations résidentielles du recensement de l’Insee</h2>
<p>Le <a href="https://www.insee.fr/fr/statistiques/4171543?sommaire=4171558">fichier détail “MIGCOM”</a> indique pour l’ensemble des résidents en France (une ligne par individu, chacun ayant un poids de pondération) sa commune de résidence actuelle, sa commune de résidence antérieure, ainsi qu’une vingtaine de variables précisant les caractéristiques socio-démographiques des individus (sexe, age, groupe socioprofessionnel, etc…).</p>
<p>Il est disponible pour le RP 2008 où la commune de résidence antérieure est renseignée 5 ans auparavant, et pour les RP 2013, 2014, 2015, 2016 où la commune de résidence antérieure est connue au 1er janvier de l’année précédente. On peut télécharger directement depuis le site de l’Insee grâce à la fonction <strong><code>chargement_fd_migcom</code></strong>.</p>
<ul>
<li>Première possibilité : télécharger le fichier détail directement depuis le site de l’Insee (l’argument <strong><code>telechargement</code></strong> vaudra alors TRUE). Il suffit d’indiquer le millésime du fichier souhaité (argument <strong><code>anneeRP</code></strong> ) : il est alors téléchargé dans le dossier précisé dans l’argument <strong><code>dossier_dest_TL</code></strong> (ici en l’occurence un sous-dossier intitulé ‘data’ qui sera créé s’il ne l’est pas déjà), puis dézippé, puis chargé dans votre session.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">FD_MIGCOM_<span class="dv">2016</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/chargement_fd_migcom.html">chargement_fd_migcom</a></span>(<span class="dt">telechargement =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb2-2" title="2">                                       <span class="dt">anneeRP =</span> <span class="st">"2016"</span>,</a>
<a class="sourceLine" id="cb2-3" title="3">                                       <span class="dt">monet =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb2-4" title="4">                                       <span class="dt">dossier_dest_TL =</span> <span class="st">"./data"</span>)</a></code></pre></div>
<p>Pour éviter de charger la table de détail en mémoire, l’option <strong><code>monet</code></strong> créé une base de données dans le sous-dossier ‘MonetDB’.</p>
<ul>
<li>Seconde possibilité : si le fichier détail “MIGCOM” en format txt a déjà été téléchargé en local, il suffit alors d’indiquer son chemin pour qu’il soit chargé en session (ou la base monetDb si l’option <code>monet</code> vaut TRUE).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">FD_MIGCOM_<span class="dv">2016</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/chargement_fd_migcom.html">chargement_fd_migcom</a></span>(<span class="dt">chemin =</span> <span class="st">"./data-raw/RP2016_MIGCOM_csv/FD_MIGCOM_2016.csv"</span>)</a></code></pre></div>
</div>
<div id="ajouter-des-maillages-supracommunaux-a-la-table-de-detail" class="section level2">
<h2 class="hasAnchor">
<a href="#ajouter-des-maillages-supracommunaux-a-la-table-de-detail" class="anchor"></a>Ajouter des maillages supracommunaux à la table de détail</h2>
<p>Pour jouer nos analyses à différentes échelles géographiques et optimiser nos temps de traitements par la suite, on ajoute dans la table de détail “MIGCOM” les mailles supra-communales souhaitées :</p>
<ul>
<li>pour l’espace de résidence antérieur : à partir de la variable ‘DCRAN’ renseignant la commune de résidence antérieure (qu’on indique dans l’argument <strong><code>CODE_COMMUNE</code></strong>), on liste les maillages supra-communaux à ajouter (argument <strong><code>NIVGEO</code></strong>) qui seront ici le département (code court ‘DEP’), l’intercommunalité (‘EPCI’) et le type de densité d’après la grille communale de densité de l’Insee (TYPEDENS). On suffixera ces nouveaux champs par le terme ‘ANTE’ (argument <strong><code>SUFFIXE</code></strong>) puisqu’ils correspondent aux territoires de résidence antérieure. Par ailleurs, le millésime du Code Officiel Géographique du code commune en entrée (<strong><code>COG_IN</code></strong>) est 2018 puisque le fichier est issu du RP 2016 (N+2), alors que le COG des maillages supra-communaux en sortie (<strong><code>COG_NIVGEO</code></strong>) sera 2019.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">FD_MIGCOM_<span class="dv">2016</span>  &lt;-<span class="st">  </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/ajout_nivgeo_supracomm.html">ajout_nivgeo_supracomm</a></span>(<span class="dt">TABLE =</span> FD_MIGCOM_<span class="dv">2016</span> ,</a>
<a class="sourceLine" id="cb4-3" title="3">                         <span class="dt">CODE_COMMUNE =</span> <span class="st">"DCRAN"</span>,</a>
<a class="sourceLine" id="cb4-4" title="4">                         <span class="dt">SUFFIXE =</span> <span class="st">"ANTE"</span>,</a>
<a class="sourceLine" id="cb4-5" title="5">                         <span class="dt">NIVGEO=</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"DEP"</span>,<span class="st">"REG"</span>,<span class="st">'EPCI'</span>,<span class="st">'TYPEDENS'</span>),</a>
<a class="sourceLine" id="cb4-6" title="6">                         <span class="dt">COG_IN =</span> <span class="dv">2018</span>,</a>
<a class="sourceLine" id="cb4-7" title="7">                         <span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>) </a></code></pre></div>
<ul>
<li>pour l’espace de résidence actuel : On réitère l’opération mais à partir de la variable ‘COMMUNE’ renseignant la commune de résidence actuelle. On suffixera ces nouveaux champs par le terme ‘ACTU’ (argument <strong><code>SUFFIXE</code></strong>) puisqu’ils correspondent aux territoires de résidence actuelle.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">FD_MIGCOM_<span class="dv">2016</span>  &lt;-<span class="st"> </span>FD_MIGCOM_<span class="dv">2016</span> <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/ajout_nivgeo_supracomm.html">ajout_nivgeo_supracomm</a></span>(<span class="dt">TABLE =</span> . ,</a>
<a class="sourceLine" id="cb5-3" title="3">                         <span class="dt">CODE_COMMUNE =</span> <span class="st">"COMMUNE"</span>,</a>
<a class="sourceLine" id="cb5-4" title="4">                         <span class="dt">SUFFIXE =</span> <span class="st">"ACTU"</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">                         <span class="dt">NIVGEO=</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"DEP"</span>,<span class="st">"REG"</span>, <span class="st">'EPCI'</span>,<span class="st">'TYPEDENS'</span>),</a>
<a class="sourceLine" id="cb5-6" title="6">                         <span class="dt">COG_IN =</span> <span class="dv">2018</span>, </a>
<a class="sourceLine" id="cb5-7" title="7">                         <span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>)</a></code></pre></div>
</div>
<div id="calculer-des-flux-de-mobilites-residentielles-entre-territoires" class="section level2">
<h2 class="hasAnchor">
<a href="#calculer-des-flux-de-mobilites-residentielles-entre-territoires" class="anchor"></a>Calculer des flux de mobilités résidentielles entre territoires</h2>
<p>On souhaite connaitre le nombre d’individus ayant migré d’un territoire (résidence antérieure) à un autre territoire (résidence actuelle). La fonction <code>calcul_flux_migres</code> va génèrer une table contenant le niveau géographique antérieur, le niveau géographique actuel ainsi que le nombre d’individus ayant migré de l’un à l’autre. On précise la table de détail en entrée ( <strong><code>TABLE</code></strong>), sa variable contenant le nombre d’invidus (ici il s’agit de l’indice de pondération “IPONDI”) dans l’argument <strong><code>VAR_NB</code></strong>. Avec <strong><code>MIG_NET_INTERNE</code></strong> valant TRUE, on précise que l’on souhaite ne conserver que les migrations internes au territoire ; les arrivées depuis un pays étranger ne seront donc pas comptabilisées. Enfin on indique le champ contenant l’espace de résidence antérieur via l’argument <strong><code>NIVGEO_ANTE</code></strong> (ici en l’occurence “DEP_ANTE”) et celui de résidence actuel via l’argument <strong><code>NIVGEO_ACTU</code></strong> (“DEP_ACTU”).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">flux_migres_DEP &lt;-</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw"><a href="../reference/calcul_flux_migres.html">calcul_flux_migres</a></span>(<span class="dt">TABLE =</span>FD_MIGCOM_<span class="dv">2016</span> ,</a>
<a class="sourceLine" id="cb6-3" title="3">                 <span class="dt">VAR_NB =</span> <span class="st">"IPONDI"</span>,</a>
<a class="sourceLine" id="cb6-4" title="4">                 <span class="dt">MIG_NET_INTERNE=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb6-5" title="5">                 <span class="dt">NIVGEO_ANTE =</span><span class="st">"DEP_ANTE"</span>,</a>
<a class="sourceLine" id="cb6-6" title="6">                 <span class="dt">NIVGEO_ACTU =</span><span class="st">"DEP_ACTU"</span>)</a></code></pre></div>
<p>Les indicateurs de la table en sortie :</p>
<ul>
<li>territoire de résidence antérieur</li>
<li>territoire de résidence actuel</li>
<li>nombre d’individus ayant effectué la mobilité (“nb_ind”)</li>
</ul>
<p>Si une variable de ventilation de la population est précisée dans l’argument <strong><code>VAR_VENTIL</code></strong> (sexe, tranche d’âge, groupe socio-professionnel, etc…), un nouveau champ précisant cette information sera ajoutée à la table en sortie.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">flux_migres_DEP_CS1 &lt;-</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="../reference/calcul_flux_migres.html">calcul_flux_migres</a></span>(<span class="dt">TABLE =</span>FD_MIGCOM_<span class="dv">2016</span> ,</a>
<a class="sourceLine" id="cb7-3" title="3">                 <span class="dt">VAR_NB =</span> <span class="st">"IPONDI"</span>,</a>
<a class="sourceLine" id="cb7-4" title="4">                 <span class="dt">MIG_NET_INTERNE=</span><span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb7-5" title="5">                 <span class="dt">VAR_VENTIL =</span> <span class="st">"CS1"</span>,</a>
<a class="sourceLine" id="cb7-6" title="6">                 <span class="dt">NIVGEO_ANTE =</span><span class="st">"DEP_ANTE"</span>,</a>
<a class="sourceLine" id="cb7-7" title="7">                 <span class="dt">NIVGEO_ACTU =</span><span class="st">"DEP_ACTU"</span>)</a></code></pre></div>
</div>
<div id="calculer-des-indicateurs-synthetiques-lies-aux-mobilites-residentielles" class="section level2">
<h2 class="hasAnchor">
<a href="#calculer-des-indicateurs-synthetiques-lies-aux-mobilites-residentielles" class="anchor"></a>Calculer des indicateurs synthétiques liés aux mobilités résidentielles</h2>
<p>A partir d’une table de comptage de flux résidentiels entre territoires (qu’on aura par exemple généré via la fonction <code>calcul_flux_migres</code> vue précédemment), la fonction <code>calcul_indics_migres</code> génère une table contenant les indicateurs synthétiques sur chaque territoire :</p>
<ul>
<li>population entrante (“nb_ind_ENTR”)</li>
<li>population sortante (“nb_ind_SORT”)</li>
<li>population présente (“nb_ind_PRES”)</li>
<li>population autochtone (“nb_ind_AUTO”)</li>
<li>population stable (“nb_ind_ISO”)</li>
<li><p>solde migratoire (“SM”)</p></li>
<li>population mobile infra (“MINF”)</li>
<li>part d’entrants (“PE”)</li>
<li>part de sortants (“PS”)</li>
<li>taux de mobilité nette interne (“TM”)</li>
<li>taux de rotation nette interne (“TR”)</li>
<li><p>taux de mobilité infra (“TMINF”)</p></li>
</ul>
<p>La définition de ces indicateurs est à retrouver dans l’<a href="https://observatoire-territoires.github.io/migR/articles/methodo_migr.html">article méthodologique.</a></p>
<p>Par exemple, on souhaite ici calculer les indicateurs synthétiques par département : la table de flux résidentiels inter-départementaux en entrée est “flux_migres_DEP” précisée dans l’argument <strong><code>TABLE</code></strong> , son champ renseignant le territoire de résidence antérieur est “DEP_ANTE” (argument <strong><code>NIVGEO_ANTE</code></strong>), son champ renseignant le territoire de résidence actuel est “DEP_ACTU” (argument <strong><code>NIVGEO_ACTU</code></strong>), sa variable indiquant le nombre d’individus concernés par le flux est “nb_ind” (argument <strong><code>VAR_NB</code></strong>) et le nom du champ créé pour stocker les identifiants de territoires sera “DEP” (<strong><code>NIVGEO</code></strong>)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">indics_migres_DEP &lt;-</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/calcul_indics_migres.html">calcul_indics_migres</a></span>(<span class="dt">TABLE =</span>flux_migres_DEP,</a>
<a class="sourceLine" id="cb8-3" title="3">                       <span class="dt">NIVGEO_ANTE =</span><span class="st">"DEP_ANTE"</span>,</a>
<a class="sourceLine" id="cb8-4" title="4">                       <span class="dt">NIVGEO_ACTU =</span><span class="st">"DEP_ACTU"</span>,</a>
<a class="sourceLine" id="cb8-5" title="5">                       <span class="dt">VAR_NB =</span> <span class="st">"nb_ind"</span>,</a>
<a class="sourceLine" id="cb8-6" title="6">                       <span class="dt">NIVGEO =</span><span class="st">"DEP"</span>)</a></code></pre></div>
<p>Si une variable de ventilation de la population est précisée dans l’argument <strong><code>VAR_VENTIL</code></strong> (sexe, tranche d’âge, groupe socio-professionnel, etc…), un nouveau champ précisant cette information sera ajoutée à la table en sortie.</p>
<p>Exemple ci-dessous : à partir de la table de flux résidentiels inter-régionaux ventilés par groupe socioprofessionnel (“flux_migres_REG_CS1”), on calcule les indicateurs synthétiques par région et par groupe socio-professionnel. On aura donc accès pour chaque région aux informations de solde migratoire des cadres, des ouvriers, etc…</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">indics_migres_REG_CS1 &lt;-</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw"><a href="../reference/calcul_indics_migres.html">calcul_indics_migres</a></span>(<span class="dt">TABLE =</span>flux_migres_REG_CS1,</a>
<a class="sourceLine" id="cb9-3" title="3">                       <span class="dt">VAR_NB =</span> <span class="st">"nb_ind"</span>,</a>
<a class="sourceLine" id="cb9-4" title="4">                       <span class="dt">VAR_VENTIL =</span> <span class="st">"CS1"</span>,</a>
<a class="sourceLine" id="cb9-5" title="5">                       <span class="dt">NIVGEO =</span><span class="st">"REG"</span>,</a>
<a class="sourceLine" id="cb9-6" title="6">                       <span class="dt">NIVGEO_ACTU =</span><span class="st">"REG_ACTU"</span>,</a>
<a class="sourceLine" id="cb9-7" title="7">                       <span class="dt">NIVGEO_ANTE =</span><span class="st">"REG_ANTE"</span>)</a></code></pre></div>
</div>
<div id="calculer-les-indicateurs-de-renouvellement-socio-demographique-de-la-population" class="section level2">
<h2 class="hasAnchor">
<a href="#calculer-les-indicateurs-de-renouvellement-socio-demographique-de-la-population" class="anchor"></a>Calculer les indicateurs de renouvellement socio-démographique de la population</h2>
<p>A partir d’une table contenant les indicateurs synthétiques sur les migrations résidentiels calculés précédemment via la fonction <code>calcul_indics_migres</code> (population entrante, sortante, autochtone et présente), la fonction <code>calcul_indics_renouv</code> génère une table contenant les indicateurs de renouvellement socio-démographique sur chaque territoire :</p>
<ul>
<li>indice de catégorisation par l’immigration (“ICI”)</li>
<li>indice de catégorisation par l’émigration (“ICE”)</li>
<li>indice de catégorisation par les migrations (“ICM”)</li>
<li><p>évolution de la part de la catégorie au sein de la population par le jeu des migrations internes (‘evol_pct_AUTO_PRES’)</p></li>
<li>indice de renouvellement global par l’immigration (“IRI”)</li>
<li>indice de renouvellement global par l’émigration (“IRE”)</li>
<li><p>indice de renouvellement global par les migrations (“IRM”)</p></li>
</ul>
<p>La définition de ces indicateurs est à retrouver dans l’<a href="https://observatoire-territoires.github.io/migR/articles/methodo_migr.html#indices-de-renouvellement-socio-professionnel-de-la-population-par-les-migrations-residentielles">article méthodologique.</a></p>
<p>Par exemple, on souhaite ici calculer les indicateurs de renouvellement socio-démographique par intercommunalité avec une ventilation par groupe socioprofessionnel : la table d’indicateurs en entrée est “indics_migres_EPCI_CS1” précisée dans l’argument <strong><code>TABLE</code></strong> , son champ renseignant le territoire est “EPCI” (argument <strong><code>NIVGEO</code></strong>), les champs contenant la population entrante (argument <strong><code>NB_ENTR</code></strong>), sortante (argument <strong><code>NB_SORT</code></strong>), autochtone (argument <strong><code>NB_AUTO</code></strong>) et présente (argument <strong><code>NB_PRES</code></strong>) sont renseignés et sa variable de ventilation est bien le groupe socioprofessionnel (“CS1” dans l’argument <strong><code>VAR_VENTIL</code></strong>) :</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">indics_mig_EPCI_CS1_RENOUV &lt;-</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st"> </span><span class="kw"><a href="../reference/calcul_indics_renouv.html">calcul_indics_renouv</a></span>(<span class="dt">TABLE =</span> indics_migres_EPCI_CS1,</a>
<a class="sourceLine" id="cb10-3" title="3">                      <span class="dt">NIVGEO =</span> <span class="st">"EPCI"</span>,</a>
<a class="sourceLine" id="cb10-4" title="4">                      <span class="dt">NB_ENTR =</span> <span class="st">"nb_ind_ENTR"</span>,</a>
<a class="sourceLine" id="cb10-5" title="5">                      <span class="dt">NB_SORT =</span> <span class="st">"nb_ind_SORT"</span>,</a>
<a class="sourceLine" id="cb10-6" title="6">                      <span class="dt">NB_AUTO =</span> <span class="st">"nb_ind_AUTO"</span>,</a>
<a class="sourceLine" id="cb10-7" title="7">                      <span class="dt">NB_PRES =</span> <span class="st">"nb_ind_PRES"</span>,</a>
<a class="sourceLine" id="cb10-8" title="8">                      <span class="dt">VAR_VENTIL =</span><span class="st">"CS1"</span>)</a></code></pre></div>
</div>
<div id="calculer-les-indicateurs-devolution-demographique-dont-solde-naturel-et-solde-migratoire-apparent-depuis-1968" class="section level2">
<h2 class="hasAnchor">
<a href="#calculer-les-indicateurs-devolution-demographique-dont-solde-naturel-et-solde-migratoire-apparent-depuis-1968" class="anchor"></a>Calculer les indicateurs d’évolution démographique (dont solde naturel et solde migratoire apparent) depuis 1968</h2>
<p>Afin de remettre en persective l’évolution démographique des territoires sur le long terme, et non plus seulement sur une année (cf. fichier détail ‘MIGCOM’ exploité précédemment), il est utile d’exploiter les “séries historiques de population” diffusées par l’Insee : celles-ci présentent, par commune et par période intercensitaire depuis 1968, le nombre d’habitants, de naissances et de décès. Il est ainsi possible d’en déduire pour le territoire souhaité des indicateurs : - d’évolution démographique totale par période - d’évolution démographique due au solde naturel (résultant de la différence entre naissances et décès) - d’évolution démographique due au solde migratoire apparent (obtenue par différence entre évolution démographique totale et evolution due au solde naturel)</p>
<p>Cette evolution de la population du territoire due au solde migratoire apparent prend également en compte les échanges avec les pays étrangers, et à ce titre ne doit pas être confondue avec le solde migratoire net interne vu précédemment.</p>
<ul>
<li>Première étape : charger les indicateurs bruts du <a href="https://www.insee.fr/fr/statistiques/4171585">fichier “séries historiques”</a> de l’Insee</li>
</ul>
<p>Grâce à la fonction <code>chargement_bd_histodemo</code>, il est possible de télécharger le fichier xls directement depuis le site de l’Insee (l’argument <strong><code>telechargement</code></strong> vaudra alors TRUE). Il est alors stocké dans le dossier précisé dans l’argument <strong><code>dossier_dest_TL</code></strong> (ici en l’occurence un sous-dossier intitulé ‘data’ qui sera créé s’il ne l’est pas déjà), puis dézippé, puis chargé dans votre session.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">COMM_HISTODEMO_<span class="dv">2016</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/chargement_bd_histodemo.html">chargement_bd_histodemo</a></span>(<span class="dt">telechargement =</span> <span class="ot">TRUE</span>, <span class="dt">dossier_dest_TL =</span> <span class="st">"./data"</span>) </a></code></pre></div>
<p>Si le fichier a déjà été téléchargé en local, il suffit alors d’indiquer son chemin pour qu’il soit chargé en session (l’argument <strong><code>telechargement</code></strong> vaudra alors FALSE).</p>
<ul>
<li>Seconde étape : calculer les indicateurs d’évolution démographique par période intercensitaire sur le territoire souhaité</li>
</ul>
<p>La fonction <code>calcul_indics_histodemo</code> permet de génère une table contenant les indicateurs d’évolution démographique (évolution de la population, solde naturel, solde migratoire apparent…) par période intercensitaire et à la maille communale ou supra-communale souhaitée.</p>
<p>Ici on calculera les indicateurs à la maille départementale :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">DEP_histodemo_<span class="dv">19682016</span> &lt;-<span class="st">  </span><span class="kw"><a href="../reference/calcul_indics_histodemo.html">calcul_indics_histodemo</a></span>(<span class="dt">TABLE =</span> COMM_HISTODEMO_<span class="dv">2016</span>, <span class="dt">anneeRP =</span> <span class="dv">2016</span>, <span class="dt">NIVGEO =</span> <span class="st">"DEP"</span>,<span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>)</a></code></pre></div>
<p>Pour chaque territoire et chaque période, la table générée en sortie renseigne :</p>
<ul>
<li>la population en début et en fin de période</li>
<li>le nombre de naissances et de décès au cours de la période</li>
<li>l’évolution de la population totale en nombre d’habitants, celle due au solde naturel et celle due au solde migratoire apparent</li>
<li>le taux d’évolution annuel de la population totale, celui du au solde naturel et celui due au solde migratoire apparent</li>
</ul>
<p>L’ensemble des mailles supra-communales disponibles et la définition exacte des indicateurs est bien sûr à retrouver dans l’aide de la fonction.</p>
</div>
<div id="faciliter-la-lecture-des-tableaux-de-flux-et-dindicateurs" class="section level2">
<h2 class="hasAnchor">
<a href="#faciliter-la-lecture-des-tableaux-de-flux-et-dindicateurs" class="anchor"></a>Faciliter la lecture des tableaux de flux et d’indicateurs</h2>
<p>Outre la fonction <code>ajout_nivgeo_supracomm</code> vue précédemment qui permet d’ajouter des mailles supracommunales dans une table contenant un champ communal, deux autres fonctions permettent de faciliter la lecture des tables générées :</p>
<ul>
<li>la fonction <code>ajout_libelles_NIVGEO</code> ajoute un champ contenant le libellé d’un territoire à partir de son code court.</li>
</ul>
<p>On peut par exemple rapidement ajouter le libellé des départements dans la table d’indicateurs départementaux générée précédemment en indiquant le nom du champ contenant le code (“DEP”) dont l’intitulé est identique à la maille supracommunale. Le millésime du COG est également à préciser :</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">indics_migres_DEP &lt;-</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw"><a href="../reference/ajout_libelles_nivgeo.html">ajout_libelles_nivgeo</a></span>(<span class="dt">TABLE =</span> indics_migres_DEP,</a>
<a class="sourceLine" id="cb13-3" title="3">                      <span class="dt">NIVGEO_IN =</span><span class="st">"DEP"</span>,</a>
<a class="sourceLine" id="cb13-4" title="4">                      <span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>)</a></code></pre></div>
<p>On pourra également préciser les noms de champs en entrée et en sortie s’ils diffèrent du code court, par exemple pour une table de flux où l’on souhaite ajouter à la fois les libellées des territoires de résidence antérieur et de résidence actuel (plus d’infos dans l’aide de la fonction <code>ajout_libelles_nivgeo</code> )</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">flux_migres_EPCI &lt;-</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st"> </span><span class="kw"><a href="../reference/ajout_libelles_nivgeo.html">ajout_libelles_nivgeo</a></span>(<span class="dt">TABLE =</span> flux_migres_EPCI,</a>
<a class="sourceLine" id="cb14-3" title="3">                       <span class="dt">NIVGEO_IN =</span><span class="st">"EPCI_ANTE"</span>,</a>
<a class="sourceLine" id="cb14-4" title="4">                       <span class="dt">NIVGEO_OUT =</span><span class="st">"EPCI"</span>,</a>
<a class="sourceLine" id="cb14-5" title="5">                       <span class="dt">LIBGEO_OUT =</span> <span class="st">"LIB_EPCI_ANTE"</span>,</a>
<a class="sourceLine" id="cb14-6" title="6">                       <span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="st">  </span><span class="kw"><a href="../reference/ajout_libelles_nivgeo.html">ajout_libelles_nivgeo</a></span>(<span class="dt">TABLE =</span> .,</a>
<a class="sourceLine" id="cb14-8" title="8">                        <span class="dt">NIVGEO_IN =</span><span class="st">"EPCI_ACTU"</span>,</a>
<a class="sourceLine" id="cb14-9" title="9">                        <span class="dt">NIVGEO_OUT =</span><span class="st">"EPCI"</span>,</a>
<a class="sourceLine" id="cb14-10" title="10">                        <span class="dt">LIBGEO =</span> <span class="st">"LIB_EPCI_ACTU"</span>,</a>
<a class="sourceLine" id="cb14-11" title="11">                        <span class="dt">COG_NIVGEO =</span> <span class="dv">2019</span>)</a></code></pre></div>
<ul>
<li>la fonction <code>ajout_libelles_varventil_insee</code> ajoute un champ contenant le libellé d’une variable de ventilation (sexe, groupe socioprofessionnel, secteur d’activité…) à partir de son code court.</li>
</ul>
<p>Exemple : la table des indicateurs synthétiques par département ventilée par groupe socioprofessionnel créée précédemment peut être enrichie d’un champ contenant les modalités de ces groupes socioprofessionnels (“Employés”, “Ouvriers”, “Retraités”…) à partir du champ contenant contenant le code court (“5”,“6”,“7”…). Le millésime du fichier du recensement utilisé est également à préciser :</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">indics_migres_DEP_CS1 &lt;-</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw"><a href="../reference/ajout_libelles_varventil_insee.html">ajout_libelles_varventil_insee</a></span>(<span class="dt">TABLE =</span> indics_migres_DEP_CS1,</a>
<a class="sourceLine" id="cb15-3" title="3">                               <span class="dt">VAR =</span><span class="st">"CS1"</span>,</a>
<a class="sourceLine" id="cb15-4" title="4">                               <span class="dt">MILLESIME_RP =</span> <span class="dv">2016</span>)</a></code></pre></div>
<p>Les variables de ventilation sont listées dans l’aide de la fonction <code>ajout_libelles_varventil_insee</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#telecharger-le-fichier-detail-des-migrations-residentielles-du-recensement-de-linsee">Télécharger le fichier détail des migrations résidentielles du recensement de l’Insee</a></li>
      <li><a href="#ajouter-des-maillages-supracommunaux-a-la-table-de-detail">Ajouter des maillages supracommunaux à la table de détail</a></li>
      <li><a href="#calculer-des-flux-de-mobilites-residentielles-entre-territoires">Calculer des flux de mobilités résidentielles entre territoires</a></li>
      <li><a href="#calculer-des-indicateurs-synthetiques-lies-aux-mobilites-residentielles">Calculer des indicateurs synthétiques liés aux mobilités résidentielles</a></li>
      <li><a href="#calculer-les-indicateurs-de-renouvellement-socio-demographique-de-la-population">Calculer les indicateurs de renouvellement socio-démographique de la population</a></li>
      <li><a href="#calculer-les-indicateurs-devolution-demographique-dont-solde-naturel-et-solde-migratoire-apparent-depuis-1968">Calculer les indicateurs d’évolution démographique (dont solde naturel et solde migratoire apparent) depuis 1968</a></li>
      <li><a href="#faciliter-la-lecture-des-tableaux-de-flux-et-dindicateurs">Faciliter la lecture des tableaux de flux et d’indicateurs</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Observatoire des Territoires, Joel Gombin.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
